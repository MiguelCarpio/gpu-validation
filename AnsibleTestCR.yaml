---
apiVersion: test.openstack.org/v1beta1
kind: AnsibleTest
metadata:
  name: gpu-validation
  namespace: openstack
spec:
  ansibleGitRepo: https://github.com/rhos-vaf/gpu-validation.git
  # yamllint disable rule:line-length
  ansibleInventory: |
    [control_node]
    localhost ansible_connection=local
    [target_nodes]
    gpu-validation-0 ansible_host=192.168.122.222 ansible_user=cloud-user ansible_ssh_private_key_file=~/test_keypair.key ansible_ssh_common_args='-o StrictHostKeyChecking=no'
  # yamllint enable rule:line-length
  ansiblePlaybookPath: main.yaml
  ansibleVarFiles: |
    gpu_validation_model_tests_enabled: false
    gpu_validation_pci_devices:
      10de:27b8: 1
  containerImage: quay.io/podified-master-centos9/openstack-ansible-tests:current-podified
  debug: false
  openStackConfigMap: openstack-config
  openStackConfigSecret: openstack-config-secret
  privileged: true
  resources: {}
  # If not running in cifmw, the SSH secret can be generated using the following command
  # oc create secret generic dataplane-ansible-ssh-private-key-secret --from-file=ssh-privatekey=/home/stack/.ssh/gpu-validation.pem
  computeSSHKeySecretName: dataplane-ansible-ssh-private-key-secret
  workloadSSHKeySecretName: dataplane-ansible-ssh-private-key-secret
